<script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  let hole = { x: 100, y: 100, size: 40 };
  let buildings = [];

  function randomBuilding() {
    return {
      x: Math.random() * 760,
      y: Math.random() * 560,
      size: 40
    };
  }

  for (let i = 0; i < 20; i++) {
    buildings.push(randomBuilding());
  }

  document.addEventListener('keydown', (e) => {
    switch (e.key) {
      case 'ArrowUp':    hole.y -= 10; break;
      case 'ArrowDown':  hole.y += 10; break;
      case 'ArrowLeft':  hole.x -= 10; break;
      case 'ArrowRight': hole.x += 10; break;
    }
  });

  function checkCollision(h, b) {
    return h.x < b.x + b.size && h.x + h.size > b.x &&
           h.y < b.y + b.size && h.y + h.size > b.y;
  }

  function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // desenha buraco
    ctx.beginPath();
    ctx.arc(hole.x + hole.size/2, hole.y + hole.size/2, hole.size, 0, 2 * Math.PI);
    ctx.fillStyle = 'black';
    ctx.fill();

    // desenha e remove edifÃ­cios colididos
    buildings = buildings.filter(b => {
      if (checkCollision(hole, b)) {
        hole.size += 2;
        return false;
      } else {
        ctx.fillStyle = 'gray';
        ctx.fillRect(b.x, b.y, b.size, b.size);
        return true;
      }
    });

    requestAnimationFrame(update);
  }

  update();
</script>
